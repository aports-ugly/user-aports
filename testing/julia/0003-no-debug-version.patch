Description: Do not compile and install the debugging version of Julia
Author: SÃ©bastien Villemot <sebastien@debian.org>
Forwarded: not-needed
Last-Update: 2013-10-09
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/Makefile
+++ b/Makefile
@@ -205,7 +205,7 @@
 
 
 # public libraries, that are installed in $(prefix)/lib
-JL_LIBS = julia julia-debug
+JL_LIBS = julia
 
 # private libraries, that are installed in $(prefix)/lib/julia
 JL_PRIVATE_LIBS = ccalltest
@@ -292,7 +292,7 @@
 endef
 
 install: $(build_bindir)/stringreplace doc/_build/html
-	@$(MAKE) $(QUIET_MAKE) all
+	@$(MAKE) $(QUIET_MAKE) release
 	@for subdir in $(bindir) $(libexecdir) $(datarootdir)/julia/site/$(VERSDIR) $(docdir) $(man1dir) $(includedir)/julia $(libdir) $(private_libdir) $(sysconfdir); do \
 		mkdir -p $(DESTDIR)$$subdir; \
 	done
@@ -342,7 +342,6 @@
 	# Copy system image
 	-$(INSTALL_F) $(build_private_libdir)/sys.ji $(DESTDIR)$(private_libdir)
 	$(INSTALL_M) $(build_private_libdir)/sys.$(SHLIB_EXT) $(DESTDIR)$(private_libdir)
-	$(INSTALL_M) $(build_private_libdir)/sys-debug.$(SHLIB_EXT) $(DESTDIR)$(private_libdir)
 	# Copy in system image build script
 	$(INSTALL_M) contrib/build_sysimg.jl $(DESTDIR)$(datarootdir)/julia/
 	# Copy in standalone executable build script
@@ -388,7 +387,6 @@
 
 	# Overwrite JL_SYSTEM_IMAGE_PATH in julia library
 	$(call stringreplace,$(DESTDIR)$(private_libdir)/libjulia.$(SHLIB_EXT),sys.$(SHLIB_EXT)$$,$(private_libdir_rel)/sys.$(SHLIB_EXT))
-	$(call stringreplace,$(DESTDIR)$(private_libdir)/libjulia-debug.$(SHLIB_EXT),sys-debug.$(SHLIB_EXT)$$,$(private_libdir_rel)/sys-debug.$(SHLIB_EXT))
 endif
 
 	mkdir -p $(DESTDIR)$(sysconfdir)
