# Contributor: Jakub Jirutka <jakub@jirutka.cz>
# Maintainer: Jakub Jirutka <jakub@jirutka.cz>
pkgname=openspecfun
pkgver=0.5.2
pkgrel=0
pkgdesc="A collection of special mathematical functions."
url="https://github.com/JuliaLang/openspecfun"
arch="all"
license="MIT public-domain"
depends=""
depends_dev="openlibm-dev"
makedepends="$depends_dev gfortran"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/JuliaLang/$pkgname/archive/v$pkgver.tar.gz
	openspecfun.pc
	"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"

	make USE_OPENLIBM=1 prefix=/usr || return 1
	sed "s/@VERSION@/$pkgver/" "$srcdir"/$pkgname.pc > $pkgname.pc
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" prefix=/usr install || return 1
	install -D $pkgname.pc "$pkgdir"/usr/lib/pkgconfig/$pkgname.pc
}

md5sums="21f53509ea59916510ec2d1485b529c2  openspecfun-0.5.2.tar.gz
ae2fe91e83866e1732c78d204387d75b  openspecfun.pc"
sha256sums="e16fc52c1bb1c9dae079c3903e44bb708d4887ff7b543fcd28e24ce10c14abf8  openspecfun-0.5.2.tar.gz
ba1f341c00e4def4d8d17455446039a4b1ee0a7c97bab1e3b59ec14aaa5b5e51  openspecfun.pc"
sha512sums="bb36a13453c440228a02e2afc9ee2e0c21310bf90351fc757fa99807d63e3e3ff48e682ed03c026e3f5144f7715f9f7b08797cbf697cb16999a9b9e138c6f1fb  openspecfun-0.5.2.tar.gz
75d3887811f0bcade03a6f9c7fc1fcc3829778662642f6a628c3aaacf56334e6750d5fc32711e6f83a2a435feaf9640fa88b63414256c84bc55ed00400ddc30a  openspecfun.pc"
